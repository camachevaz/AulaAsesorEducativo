---
title: Связывание AjaxAutocomplete и AjaxLookup
sidebar: flexberry-aspnet_sidebar
keywords: Flexberry ASP-NET
toc: true
permalink: ru/fa_link-ajax-autocomplete-ajax-lookup.html
lang: ru
---

Имеется возможность привязать AjaxAutocomplete к AjaxLookup. Т.е. при выборе значения в контроле с поддержкой `AjaxAutocomplete` будет автоматически проставляться значение лукапа, если значение заданного свойства будет найдено в мастеровых объектах, иначе лукапу проставится пустое значение.
__Внимание:__ Не стоит путать это с поддержкой `автодополнения в AjaxLookup`.

__Внимание:__ Если требуется использовать вычислимое свойство, то обязательно должно быть указано представление!

## Возможная ситуация

![](/images/pages/products/flexberry-aspnet/controls/link-autocomplete.png)

Например, на форме редактирования `Организация` отображаются лукап для мастера `Адрес` и собственное свойство `АдресСтрокой`. Вам нужно добавить автодополнение для `АдресСтрокой`, значения которые будут браться из `Адрес.АдресПолностью`. При совпадении введенного значения и значения мастера в свойстве `Адрес.АдресПолностью` проставится значение лукапа(ссылка на объект). Если вы ввели значение, которого нет в мастеровых значениях, то `АдресСтрокой` просто сохранится, а ссылка на мастера не будет проставлена.

## Пример

```csharp
AjaxAutocomplete.AddLinkedAutocomplete(ctrlАдрес, ctrlАдресСтрокой, typeof(Адрес), "АдресПолностью");
```

{% include note.html content="Данный код можно расположить в методе `PreApplyToControls` [формы редактирования](fa_form-interaction.html)." %}

Также, имеется настройка связи между лукапом и полем для ввода. Например, если нужно изменять значение в поле для ввода, если меняется значение в лукапе.

## Пример

```csharp
bool changeValueWithLookup = true;
AjaxAutocomplete.AddLinkedAutocomplete(ctrlАдрес, ctrlАдресСтрокой, typeof(Адрес), "АдресПолностью", changeValueWithLookup);
```

## Пример явного задания ограничения для автодополнения

__Внимание__: Если задано ограничение ajax-лукапу и он связан с текстовым полем, при этом явно не задано ограничение на автодополнение, то ограничение на автодополнение возьмется из лукапа.

```csharp
Function licenceFunc = FunctionBuilder.BuildSQL("(select count(*) from ЛицензияОрганизации where STORMMainObjectKey = Организация) > 0");
AjaxAutocomplete.AddLinkedAutocomplete(ctrlСоздательГеопункта, ctrlСоздательГеопунктаСтрокой, typeof(Организация), "ОрганизацияПроп",  true, true, licenceFunc);
```
